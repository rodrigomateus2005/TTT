var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var C_MDFe_OLD = /** @class */ (function (_super) {
    __extends(C_MDFe_OLD, _super);
    function C_MDFe_OLD() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Object.defineProperty(C_MDFe_OLD.prototype, "grdReboque", {
        get: function () {
            return window['grdReboque_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "grdPedagio", {
        get: function () {
            return window['grdPedagio_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mdTransmitirNFe", {
        get: function () {
            return window['mdTransmitirNFe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "lblSituacaoAtual", {
        get: function () {
            return window['lblSituacaoAtual_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "lblSituacao", {
        get: function () {
            return window['lblSituacao_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "lblSituacaoEvento", {
        get: function () {
            return window['lblSituacaoEvento_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "lblRetornoEvento", {
        get: function () {
            return window['lblRetornoEvento_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "grdCte", {
        get: function () {
            return window['grdCte_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "grdNFe", {
        get: function () {
            return window['grdNFe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "grdNF", {
        get: function () {
            return window['grdNF_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnAdicionaReboque", {
        get: function () {
            return window['btnAdicionaReboque_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnAdicionaPedagio", {
        get: function () {
            return window['btnAdicionaPedagio_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "cbpEventoNFe", {
        get: function () {
            return window['cbpEventoNFe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "cboSerie", {
        get: function () {
            return window['cboSerie_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnAdicionaCTe", {
        get: function () {
            return window['btnAdicionaCTe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnAdicionaNFe", {
        get: function () {
            return window['btnAdicionaNFe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnAdicionaMDFe", {
        get: function () {
            return window['btnAdicionaMDFe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnEventos", {
        get: function () {
            return window['btnEventos_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnEncerrarMdfe", {
        get: function () {
            return window['btnEncerrarMdfe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnGerenciarNFe", {
        get: function () {
            return window['btnGerenciarNFe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "btnConfirmaEvento", {
        get: function () {
            return window['btnConfirmaEvento_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mdReboque", {
        get: function () {
            return window['mdReboque_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mdEncerrar", {
        get: function () {
            return window['mdEncerrar_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mdEventosMDFe", {
        get: function () {
            return window['mdEventosMDFe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mdPedagio", {
        get: function () {
            return window['mdPedagio_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mdCTe", {
        get: function () {
            return window['mdCTe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mdNFe", {
        get: function () {
            return window['mdNFe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mdMdfe", {
        get: function () {
            return window['mdMdfe_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "mtpDocumentos", {
        get: function () {
            return window['mtpDocumentos_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "tab", {
        get: function () {
            return window['tab_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "cboUFDoc", {
        get: function () {
            return window['cboUFDoc_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "cboTipoEvento", {
        get: function () {
            return window['cboTipoEvento_comboBox'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "cboMunDoc", {
        get: function () {
            return window['cboMunDoc_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtJustificativaEvento", {
        get: function () {
            return window['txtJustificativaEvento_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "hdnCodigo", {
        get: function () {
            return $('#hdnCodigo')[0];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "cboEmpresa", {
        get: function () {
            return window['cboEmpresa_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtCNPJ", {
        get: function () {
            return window['txtCNPJ_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtIE", {
        get: function () {
            return window['txtIE_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtNome", {
        get: function () {
            return window['txtNome_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtFantasia", {
        get: function () {
            return window['txtFantasia_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtEndereco", {
        get: function () {
            return window['txtEndereco_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtNumero", {
        get: function () {
            return window['txtNumero_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtComplemento", {
        get: function () {
            return window['txtComplemento_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtBairro", {
        get: function () {
            return window['txtBairro_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtCep", {
        get: function () {
            return window['txtCep_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtCidadeEmit", {
        get: function () {
            return window['txtCidadeEmit_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtE_Mail", {
        get: function () {
            return window['txtE_Mail_Object'];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(C_MDFe_OLD.prototype, "txtFone_DDD1", {
        get: function () {
            return window['txtFone_DDD1_Object'];
        },
        enumerable: true,
        configurable: true
    });
    C_MDFe_OLD.prototype.Init = function () {
        _super.prototype.Init.call(this);
        if (this.tab) {
            adicionarEventoMoura(this.tab.ActiveTabChanged, this.OnTabTabChanged, this);
        }
        if (this.mtpDocumentos) {
            adicionarEventoMoura(this.mtpDocumentos.ActiveTabChanged, this.OnMtpDocumentosTabChanged, this);
        }
        if (this.btnAdicionaReboque) {
            adicionarEventoMoura(this.btnAdicionaReboque.Click, this.OnClickBotaoAdicionaReboque, this);
        }
        if (this.btnAdicionaPedagio) {
            adicionarEventoMoura(this.btnAdicionaPedagio.Click, this.OnClickBotaoAdicionaPedagio, this);
        }
        if (this.btnGerenciarNFe) {
            adicionarEventoMoura(this.btnGerenciarNFe.Click, this.OnClickBotaoGerenciarNFe, this);
        }
        if (this.btnAdicionaCTe) {
            adicionarEventoMoura(this.btnAdicionaCTe.Click, this.OnClickBotaoAdicionaCte, this);
        }
        if (this.btnAdicionaNFe) {
            adicionarEventoMoura(this.btnAdicionaNFe.Click, this.OnClickBotaoAdicionaNFe, this);
        }
        if (this.btnAdicionaMDFe) {
            adicionarEventoMoura(this.btnAdicionaMDFe.Click, this.OnClickBotaoAdicionaMDFe, this);
        }
        if (this.btnConfirmaEvento) {
            adicionarEventoMoura(this.btnConfirmaEvento.Click, this.OnClickBotaoConfirmarEvento, this);
        }
        if (this.btnEventos) {
            adicionarEventoMoura(this.btnEventos.Click, this.OnClickBotaoEventosMDFe, this);
        }
        if (this.btnEncerrarMdfe) {
            adicionarEventoMoura(this.btnEncerrarMdfe.Click, this.OnClickBotaoEncerrarMDFe, this);
        }
        if (this.cboEmpresa) {
            adicionarEventoMoura(this.cboEmpresa.SelectedItemChanged, this.OnChangeCboEmpresa, this);
        }
    };
    C_MDFe_OLD.prototype.OnClickBotaoAdicionaReboque = function (s, e) {
        e.processOnServer = false;
        if (this.mdReboque && this.mdReboque.ModalDialog) {
            this.mdReboque.ModalDialog.Show();
        }
        return false;
    };
    C_MDFe_OLD.prototype.OnClickBotaoEncerrarMDFe = function (s, e) {
        e.processOnServer = false;
        if (this.lblSituacao.Text.toUpperCase() != "AUTORIZADA") {
            MsgBoxJS("Não é possível realizar o Encerramento quando a situação do MDF-e for diferente de 'AUTORIZADA'!", MsgBoxOptions.OkOnly, MsgBoxIcon.Info, $.proxy(null, this));
        }
        else {
            if (this.mdEncerrar && this.mdEncerrar.ModalDialog) {
                this.mdEncerrar.Show();
            }
        }
        return false;
    };
    C_MDFe_OLD.prototype.OnMtpDocumentosTabChanged = function (s, e) {
        this.VerificarTabVisible();
    };
    C_MDFe_OLD.prototype.OnTabTabChanged = function (s, e) {
        this.VerificarTabVisible();
    };
    C_MDFe_OLD.prototype.VerificarTabVisible = function () {
        var visibilidade = this.mtpDocumentos.ActiveTabIndex != 0;
        this.cboMunDoc.Visible = visibilidade;
        this.cboUFDoc.Visible = visibilidade;
    };
    C_MDFe_OLD.prototype.OnClickBotaoAdicionaPedagio = function (s, e) {
        e.processOnServer = false;
        if (this.mdPedagio && this.mdPedagio.ModalDialog) {
            this.mdPedagio.ModalDialog.Show();
        }
        return false;
    };
    C_MDFe_OLD.prototype.OnClickBotaoAdicionaCte = function (s, e) {
        e.processOnServer = false;
        if (this.mdCTe && this.mdCTe.ModalDialog) {
            this.mdCTe.ModalDialog.Show();
        }
        return false;
    };
    C_MDFe_OLD.prototype.OnClickBotaoEventosMDFe = function (s, e) {
        e.processOnServer = false;
        var parametros = {
            codigo: this.hdnCodigo.value.CNum()
        };
        var retorno = this.ExecutarFuncaoServerSideSynch("VerificarNota", parametros);
        if (retorno) {
            MostrarAlerta("Para acessar as opções de gerenciamento é necessário que a Nota esteja gravada!");
            return;
        }
        if (this.mdEventosMDFe && this.mdEventosMDFe.ModalDialog) {
            this.mdEventosMDFe.ModalDialog.Show();
        }
        return false;
    };
    C_MDFe_OLD.prototype.OnClickBotaoGerenciarNFe = function (s, e) {
        e.processOnServer = false;
        var parametros = {
            codigo: this.hdnCodigo.value.CNum()
        };
        var retorno = this.ExecutarFuncaoServerSideSynch("VerificarNota", parametros);
        if (retorno) {
            MostrarAlerta("Para acessar as opções de gerenciamento é necessário que a Nota esteja gravada!");
            return;
        }
        if (this.mdTransmitirNFe && this.mdTransmitirNFe.ModalDialog) {
            this.mdTransmitirNFe.ModalDialog.Show();
        }
        return false;
    };
    C_MDFe_OLD.prototype.OnClickBotaoAdicionaNFe = function (s, e) {
        e.processOnServer = false;
        if (this.mdNFe && this.mdNFe.ModalDialog) {
            this.mdNFe.ModalDialog.Show();
        }
        return false;
    };
    C_MDFe_OLD.prototype.OnClickBotaoAdicionaMDFe = function (s, e) {
        e.processOnServer = false;
        if (this.mdMdfe && this.mdMdfe.ModalDialog) {
            this.mdMdfe.ModalDialog.Show();
        }
        return false;
    };
    C_MDFe_OLD.prototype.OnClickBotaoConfirmarEvento = function (s, e) {
        e.processOnServer = false;
        var parametros;
        var retorno;
        var ex = [];
        if (String.IsNullOrWhiteSpace(this.cboTipoEvento.GetValue())) {
            ex.push('Preencha corretamente o campo: Tipo de Evento <br/>');
        }
        if (String.IsNullOrWhiteSpace(this.txtJustificativaEvento.GetText())) {
            ex.push('Preencha corretamente o campo: Justificativa <br/>');
        }
        else {
            if (this.txtJustificativaEvento.GetText().length < 15) {
                ex.push('A justificativa deve conter no mínimo 15 caracteres! <br/>');
            }
        }
        if (ex.length > 0) {
            MostrarAlerta(ex.join(''));
            return false;
        }
        parametros = {
            codigoNf: this.hdnCodigo.value,
            xJust: this.txtJustificativaEvento.GetText(),
            Evento: this.cboTipoEvento.GetValue(),
            codEmpresa: 1,
            codSerie: this.cboSerie.GetValue()
        };
        retorno = this.ExecutarFuncaoServerSideSynch("EnviarEventoNFe", parametros);
        var arrRetorno = retorno.split("|");
        MsgBoxJS(arrRetorno[1], MsgBoxOptions.OkOnly, MsgBoxIcon.Info, $.proxy(this.carregarEventosNFe, this));
        if (arrRetorno[0].toString().toLowerCase() == "sucesso") {
            this.lblSituacao.Text = "Cancelada";
            this.lblSituacaoAtual.Text = "Cancelada";
            this.lblSituacaoEvento.Text = "Cancelada";
        }
        this.lblRetornoEvento.Text = arrRetorno[1];
        this.txtJustificativaEvento.Textbox.value = "";
        return false;
    };
    C_MDFe_OLD.prototype.carregarEventosNFe = function (e) {
        this.cbpEventoNFe.CallBackPanel.PerformCallback("AtualizarEventosMDFe");
    };
    C_MDFe_OLD.prototype.OnChangeCboEmpresa = function () {
        var objEmpresa;
        var parametros;
        parametros = {
            empresa: this.cboEmpresa.GetValue()
        };
        objEmpresa = this.ExecutarFuncaoServerSideSynch("RetornaEmitente", parametros);
        this.txtCNPJ.SetText(objEmpresa.Cnpj);
        this.txtIE.SetText(objEmpresa.Ie);
        this.txtNome.SetText(objEmpresa.Razao_Social);
        this.txtFantasia.SetText(objEmpresa.Fantasia);
        this.txtEndereco.SetText(objEmpresa.Endereco);
        this.txtNumero.SetText(objEmpresa.Numero.toString());
        this.txtComplemento.SetText("");
        this.txtBairro.SetText(objEmpresa.Bairro);
        this.txtCep.SetText(objEmpresa.Cep);
        this.txtCidadeEmit.SetText(objEmpresa.Cidade.toString());
        this.txtE_Mail.SetText(objEmpresa.Email_Fiscal);
        if (objEmpresa.Fone.length > 8) {
            if (objEmpresa.Fone.indexOf('(') === 0 && objEmpresa.Fone.indexOf(')') > 0) {
                this.txtFone_DDD1.TextBoxDDD.value = objEmpresa.Fone.substring(1, 3);
                this.txtFone_DDD1.TextBoxTelefone.value = objEmpresa.Fone.substring(4);
            }
            else {
                this.txtFone_DDD1.TextBoxDDD.value = objEmpresa.Fone.substring(0, 2);
                this.txtFone_DDD1.TextBoxTelefone.value = objEmpresa.Fone.substring(2);
            }
        }
        else {
            this.txtFone_DDD1.TextBoxTelefone.value = objEmpresa.Fone;
        }
    };
    return C_MDFe_OLD;
}(MouraPage));
var c_MDFe_OLD = new C_MDFe_OLD();
//# sourceMappingURL=C_MDFe_OLD.js.map